<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HeartReddit - The Front Page of Our World</title>
    <style>
        /* Modern, Smooth Typography */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        :root {
            --bg-body: #0f0f0f;
            --bg-card: #1a1a1b;
            --bg-hover: #272729;
            --text-main: #e4e6eb;
            --text-muted: #818384;
            --accent: #ff4500;
            --accent-glow: rgba(255, 69, 0, 0.15);
            --border: #343536;
            --heart-gradient: linear-gradient(135deg, #ff4500, #ff8717);
            --glass: rgba(26, 26, 27, 0.85);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }
        
        body {
            background: var(--bg-body);
            color: var(--text-main);
            overflow-x: hidden;
        }
        
        /* HEADER */
        .reddit-header {
            background: var(--glass);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--border);
            padding: 8px 30px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .logo {
            font-size: 1.8rem;
            color: var(--text-main);
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: 10px;
            letter-spacing: -0.5px;
        }

        .logo span {
            color: var(--accent);
        }
        
        .search-wrapper {
            position: relative;
        }

        .search-bar {
            background: #272729;
            border: 1px solid var(--border);
            padding: 10px 20px 10px 45px;
            border-radius: 50px;
            color: var(--text-main);
            font-size: 0.95rem;
            width: 450px;
            transition: all 0.2s ease;
        }
        
        .search-wrapper::before {
            content: 'üîç';
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 0.9rem;
            opacity: 0.5;
        }

        .search-bar:focus {
            outline: none;
            border-color: var(--text-main);
            background: #1a1a1b;
        }
        
        .header-btn {
            background: var(--text-main);
            color: #000;
            border: none;
            padding: 8px 24px;
            border-radius: 50px;
            font-size: 0.95rem;
            cursor: pointer;
            font-weight: 700;
            transition: all 0.2s;
        }
        
        .header-btn:hover {
            background: #fff;
            transform: scale(1.02);
        }
        
        /* LAYOUT */
        .main-layout {
            max-width: 1200px;
            margin: 20px auto;
            display: grid;
            grid-template-columns: 1fr 320px;
            gap: 24px;
            padding: 0 20px;
        }
        
        /* CARDS */
        .post-card, .sidebar-card, .create-post-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
            transition: transform 0.2s, border-color 0.2s;
        }
        
        .post-card {
            margin-bottom: 16px;
            display: flex;
        }

        .post-card:hover {
            border-color: #4a4a4b;
        }
        
        /* VOTING */
        .vote-section {
            background: #151516;
            width: 45px;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 12px 0;
            gap: 4px;
            border-right: 1px solid rgba(255,255,255,0.02);
        }
        
        .vote-btn {
            color: var(--text-muted);
            font-size: 1.2rem;
            cursor: pointer;
            padding: 2px 6px;
            border-radius: 4px;
            transition: background 0.2s;
        }
        
        .vote-btn:hover {
            background: rgba(255,255,255,0.1);
            color: var(--accent);
        }
        
        .vote-btn.upvoted { color: var(--accent); }
        .vote-btn.downvoted { color: #7193ff; }
        
        .vote-count {
            font-size: 0.85rem;
            font-weight: 700;
            color: var(--text-main);
        }
        
        .vote-count.positive { color: var(--accent); }
        .vote-count.negative { color: #7193ff; }
        
        /* CONTENT */
        .post-content {
            flex: 1;
            padding: 12px 16px;
        }
        
        .post-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
            font-size: 0.8rem;
            color: var(--text-muted);
        }
        
        .subreddit {
            color: var(--text-main);
            font-weight: 700;
            cursor: pointer;
        }
        
        .subreddit:hover { text-decoration: underline; }
        
        .subreddit-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
        }
        
        .post-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-main);
            margin-bottom: 8px;
            line-height: 1.4;
            cursor: pointer;
        }
        
        .post-text {
            font-size: 0.95rem;
            line-height: 1.6;
            color: #d1d1d1;
            margin-bottom: 12px;
            font-weight: 400;
        }
        
        .post-flair {
            background: rgba(255,255,255,0.1);
            color: var(--text-main);
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 500;
            display: inline-block;
            margin-right: 8px;
        }
        
        .post-actions {
            display: flex;
            gap: 4px;
            margin-top: 8px;
        }
        
        .action-btn {
            color: var(--text-muted);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 6px 10px;
            border-radius: 4px;
            font-size: 0.85rem;
            font-weight: 600;
            transition: background 0.2s;
        }
        
        .action-btn:hover {
            background: rgba(255,255,255,0.05);
            color: var(--text-main);
        }
        
        /* SIDEBAR */
        .sidebar {
            position: sticky;
            top: 80px;
        }
        
        .sidebar-card {
            padding: 16px;
            margin-bottom: 16px;
        }
        
        .sidebar-title {
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 12px;
        }
        
        .community-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 0;
            cursor: pointer;
        }
        
        .community-info { flex: 1; }
        
        .community-name {
            font-size: 0.95rem;
            font-weight: 500;
            color: var(--text-main);
        }
        
        .community-members {
            font-size: 0.8rem;
            color: var(--text-muted);
        }
        
        .join-btn {
            background: var(--text-main);
            color: #000;
            border: none;
            padding: 6px 16px;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .join-btn:hover { opacity: 0.9; }
        
        .join-btn.joined {
            background: transparent;
            border: 1px solid var(--text-main);
            color: var(--text-main);
        }
        
        /* CREATE POST */
        .create-post-card {
            padding: 8px;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: text;
        }
        
        .create-avatar {
            width: 38px;
            height: 38px;
            border-radius: 50%;
            background: var(--heart-gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            margin-left: 8px;
        }
        
        .fake-input {
            flex: 1;
            background: #272729;
            border: 1px solid var(--border);
            border-radius: 4px;
            padding: 10px 16px;
            color: var(--text-muted);
            font-size: 0.95rem;
            transition: all 0.2s;
        }
        
        .fake-input:hover {
            background: #1a1a1b;
            border-color: #4a4a4b;
        }

        /* MODAL (hidden by default) */
        .create-modal {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
            display: none;
            flex-direction: column;
            gap: 12px;
        }

        .create-input {
            background: #272729;
            border: 1px solid var(--border);
            border-radius: 4px;
            padding: 12px;
            color: var(--text-main);
            font-size: 1rem;
            resize: vertical;
            width: 100%;
        }

        .create-input:focus {
            outline: none;
            border-color: var(--text-main);
        }

        .animation-award {
            animation: bounce 0.5s;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
            40% {transform: translateY(-10px);}
            60% {transform: translateY(-5px);}
        }
    </style>

<script>
window.__translations = {
    en: {
        search: "Search HeartReddit...", 
        create_post: "Create Post", 
        create_placeholder: "Vent Here",
        comments: "Comments", 
        share: "Share", 
        save: "Save", 
        posted_by: "Posted by",
        award: "Award",
        join: "Join",
        joined: "Joined",
        communities: "Support Groups",
        trending: "Trending Dramas",
        about_title: "About HeartReddit",
        about_text: "A safe space for discussing bad dates, emotionally unavailable men, and why dads love cheap beer."
    },
    cs: {
        search: "Hledat na HeartRedditu...", 
        create_post: "Vytvo≈ôit p≈ô√≠spƒõvek", 
        create_placeholder: "Vyl√≠t si srdce",
        comments: "Koment√°≈ôe", 
        share: "Sd√≠let",
        save: "Ulo≈æit", 
        posted_by: "Napsala",
        award: "Ocenƒõn√≠",
        join: "P≈ôipojit se",
        joined: "ƒålen",
        communities: "Podp≈Ørn√© Skupiny",
        trending: "Dne≈°n√≠ Dramata",
        about_title: "O HeartRedditu",
        about_text: "Bezpeƒçn√© m√≠sto pro prob√≠r√°n√≠ ≈°patn√Ωch rande, emoƒçnƒõ nedostupn√Ωch mu≈æ≈Ø a proƒç t√°tov√© miluj√≠ levn√© pivo."
    }
};
</script>

<script>
// i18n bridge
(function() {
    const LANG = localStorage.getItem('heartosLang') || 'en';
    window.__lang = LANG;
    
    window.__t = function(key) {
        const dict = window.__translations;
        if (!dict) return key;
        const lang = dict[LANG] || dict['en'];
        return (lang && lang[key]) || (dict['en'] && dict['en'][key]) || key;
    };
    
    window.addEventListener('DOMContentLoaded', function() {
        const searchBar = document.querySelector('.search-bar');
        if (searchBar) searchBar.placeholder = window.__t('search');
        
        const createBtn = document.querySelector('.header-btn');
        if (createBtn) createBtn.textContent = '+ ' + window.__t('create_post');

        const fakeInput = document.querySelector('.fake-input');
        if (fakeInput) fakeInput.textContent = window.__t('create_placeholder');

        const sidebarTitles = document.querySelectorAll('.sidebar-title');
        if(sidebarTitles[0]) sidebarTitles[0].textContent = window.__t('communities');
        if(sidebarTitles[1]) sidebarTitles[1].textContent = window.__t('trending');
        if(sidebarTitles[2]) sidebarTitles[2].textContent = window.__t('about_title');

        const aboutText = document.querySelector('#about-text');
        if(aboutText) aboutText.textContent = window.__t('about_text');
        
        if (typeof window.__translateSite === 'function') {
            window.__translateSite();
        }
    });
})();
</script>

<script>
    window.__translateSite = function() {
        var t = window.__t;
        
        document.querySelectorAll('.action-btn').forEach(function(el) {
            var html = el.innerHTML;
            if (html.includes('üí¨')) {
                var num = html.match(/\d+/);
                el.innerHTML = 'üí¨ ' + (num ? num[0] + ' ' : '') + t('comments');
            } else if (html.includes('‚ÜóÔ∏è')) {
                el.innerHTML = '‚ÜóÔ∏è ' + t('share');
            } else if (html.includes('üîñ')) {
                el.innerHTML = 'üîñ ' + t('save');
            } else if (html.includes('üéÅ')) {
                var award = html.match(/\((\d+)\)/);
                el.innerHTML = 'üéÅ ' + t('award') + (award ? ' (' + award[1] + ')' : '');
            }
        });
        
        document.querySelectorAll('.post-author').forEach(function(el) {
            var username = el.textContent.replace(/Posted by |Napsala /g, '').trim();
            el.textContent = t('posted_by') + ' ' + username;
        });
        
        document.querySelectorAll('.join-btn').forEach(function(btn) {
            if (btn.classList.contains('joined')) {
                btn.textContent = t('joined');
            } else {
                btn.textContent = t('join');
            }
        });
    };
</script>
</head>
<body>
    <div class="reddit-header">
        <div class="header-left">
            <div class="logo"><span>‚ô•</span> HeartReddit</div>
            <div class="search-wrapper">
                <input type="text" class="search-bar" placeholder="Search communities...">
            </div>
        </div>
        <div class="header-right">
            <button class="header-btn" onclick="createNewPost()">+ Create Post</button>
        </div>
    </div>
    
    <div class="main-layout">
        <div class="feed">
            <div class="create-post-card" onclick="createNewPost()">
                <div class="create-avatar">üë§</div>
                <div class="fake-input">Vent Here</div>
                <div style="margin: 0 10px; opacity: 0.5;">üñºÔ∏è</div>
                <div style="margin: 0 10px; opacity: 0.5;">üîó</div>
            </div>

            <div class="create-modal" id="createPostBox">
                <input class="create-input" id="postTitle" placeholder="Title" style="font-weight: 600;">
                <textarea class="create-input" id="postContent" placeholder="Text (optional)" rows="4"></textarea>
                <div style="display: flex; gap: 10px; justify-content: flex-end;">
                    <button class="header-btn" style="background: transparent; color: var(--text-main); border: 1px solid var(--border);" onclick="cancelPost()">Cancel</button>
                    <button class="header-btn" style="background: var(--text-main); color: black;" onclick="submitPost()">Post</button>
                </div>
            </div>
            
            <div id="posts-container">
                </div>
        </div>
        
        <div class="sidebar">
            <div class="sidebar-card">
                <div class="sidebar-title">Support Groups</div>
                
                <div class="community-item">
                    <div class="subreddit-icon" style="background: #ef5350;">üö©</div>
                    <div class="community-info">
                        <div class="community-name">r/BadBoyfriends</div>
                        <div class="community-members">2.4M members</div>
                    </div>
                </div>
                
                <div class="community-item">
                    <div class="subreddit-icon" style="background: #ab47bc;">üç∫</div>
                    <div class="community-info">
                        <div class="community-name">r/MeanDads</div>
                        <div class="community-members">800K members</div>
                    </div>
                </div>
                
                <div class="community-item">
                    <div class="subreddit-icon" style="background: #29b6f6;">ü§°</div>
                    <div class="community-info">
                        <div class="community-name">r/ICanFixHim</div>
                        <div class="community-members">5M members</div>
                    </div>
                </div>
                
                <div class="community-item">
                    <div class="subreddit-icon" style="background: #ef9a9a;">üò§</div>
                    <div class="community-info">
                        <div class="community-name">r/DadRants</div>
                        <div class="community-members">1M members</div>
                    </div>
                </div>
            </div>
            
            <div class="sidebar-card">
                <div class="sidebar-title">Trending Today</div>
                
                <div class="community-item">
                    <div class="subreddit-icon" style="background: #ff7043;">üè†</div>
                    <div class="community-info">
                        <div class="community-name">r/MaleLivingSpace</div>
                        <div class="community-members">1.5M members</div>
                    </div>
                    <button class="join-btn" onclick="toggleJoin(this)">Join</button>
                </div>
                
                <div class="community-item">
                    <div class="subreddit-icon" style="background: #26a69a;">üíÖ</div>
                    <div class="community-info">
                        <div class="community-name">r/PettyRevenge</div>
                        <div class="community-members">3M members</div>
                    </div>
                    <button class="join-btn" onclick="toggleJoin(this)">Join</button>
                </div>

                <div class="community-item">
                    <div class="subreddit-icon" style="background: #7e57c2;">üí∏</div>
                    <div class="community-info">
                        <div class="community-name">r/GirlMath</div>
                        <div class="community-members">900K members</div>
                    </div>
                    <button class="join-btn" onclick="toggleJoin(this)">Join</button>
                </div>
            </div>
            
            <div class="sidebar-card">
                <div class="sidebar-title">About HeartReddit</div>
                <div id="about-text" style="font-size: 0.85rem; line-height: 1.6; color: #d7dadc;">
                    A safe space for discussing bad dates, emotionally unavailable men, and why dads love cheap beer.
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // BILINGUAL POST DATA
        const postsData = {
            1: {
                subreddit: "r/MeanDads",
                author: "u/daddy_issues_99",
                time: "2 hours ago",
                title: {
                    en: "My dad ruined Christmas because we didn't have his specific brand of cheap beer üç∫üò§",
                    cs: "T√°ta zniƒçil V√°noce, proto≈æe jsme nemƒõli jeho specifickou znaƒçku levn√©ho piva üç∫üò§"
                },
                text: {
                    en: "Honestly, I can't do this anymore. We sat down for a nice meal, and he starts complaining that there isn't enough beer. It's CHRISTMAS. We have wine, we have water, we have juice. But no, he needs his specific brand of cheap lager or the world ends.\n\nHe spent the whole dinner sulking and making mean comments about my mom's cooking just because he was sober for 20 minutes. Why are they like this?",
                    cs: "Up≈ô√≠mnƒõ, u≈æ to nezvl√°d√°m. Sedli jsme si k hezk√©mu j√≠dlu a on si zaƒçal stƒõ≈æovat, ≈æe nen√≠ dost piva. Jsou V√ÅNOCE. M√°me v√≠no, vodu, d≈æus. Ale ne, on pot≈ôebuje svoje levn√© pivo, jinak skonƒç√≠ svƒõt.\n\nCelou veƒçe≈ôi trucoval a mƒõl hnusn√© pozn√°mky o m√°minƒõ va≈ôen√≠ jen proto, ≈æe byl 20 minut st≈ô√≠zliv√Ω. Proƒç jsou takov√≠?"
                },
                comments: 342,
                score: 8700,
                awards: 7,
                flair: { en: "üç∫ Mean Dad Energy", cs: "üç∫ Hnusnej T√°ta" }
            },
            2: {
                subreddit: "r/BadBoyfriends",
                author: "u/clown_shoes",
                time: "5 hours ago",
                title: {
                    en: "He broke up with me via a Spotify playlist. I am 24 years old. ü§°",
                    cs: "Roze≈°el se se mnou p≈ôes Spotify playlist. Je mi 24 let. ü§°"
                },
                text: {
                    en: "I wish I was joking. He sent me a link titled 'Moving On'. The first song was 'Bye Bye Bye'.\n\nI drove to his house to scream at him but his mom answered the door and said he was 'napping'. I need to lie down on the highway.",
                    cs: "K√©≈æ by to byl vtip. Poslal mi odkaz s n√°zvem 'Jdu d√°l'. Prvn√≠ p√≠sniƒçka byla 'Bye Bye Bye'.\n\nJela jsem k nƒõmu dom≈Ø, abych na nƒõj k≈ôiƒçela, ale otev≈ôela jeho m√°ma a ≈ôekla, ≈æe 'spink√°'. Pot≈ôebuju si lehnout na d√°lnici."
                },
                comments: 890,
                score: 15400,
                awards: 22,
                flair: { en: "üö© The Audacity", cs: "üö© Ta Drzost" }
            },
            3: {
                subreddit: "r/DadRants",
                author: "u/branik_hater",
                time: "1 day ago",
                title: {
                    en: "Why is every dad in this country obsessed with Bran√≠k? üç∫",
                    cs: "Proƒç je ka≈æd√Ω t√°ta v t√©hle zemi posedl√Ω Bran√≠kem? üç∫"
                },
                text: {
                    en: "It tastes like rusty water. But my dad defends it like it's the elixir of life. He gets so mean if we buy anything else.\n\n'You're wasting money on that fancy stuff!' Sir, it costs 3 crowns more. Please calm down and stop yelling at the dog.",
                    cs: "Chutn√° to jako rezav√° voda. Ale m≈Øj t√°ta to br√°n√≠, jako by to byl elix√≠r ≈æivota. Je tak protivn√Ω, kdy≈æ koup√≠me cokoliv jin√©ho.\n\n'Vyhazujete pen√≠ze za ty n√≥bl vƒõci!' Panebo≈æe, stoj√≠ to o 3 koruny v√≠c. Pros√≠m, uklidni se a p≈ôesta≈à ≈ôv√°t na psa."
                },
                comments: 567,
                score: 12300,
                awards: 12,
                flair: { en: "üç∫ Dad Rants", cs: "üç∫ T√°tovo kecy" }
            },
            4: {
                subreddit: "r/ICanFixHim",
                author: "u/delulu_queen",
                time: "3 hours ago",
                title: {
                    en: "Found his ex's hair tie in his car and he said it was his sister's. He doesn't have a sister. üö©",
                    cs: "Na≈°la jsem v jeho autƒõ gumiƒçku jeho ex a on ≈ôekl, ≈æe je jeho sestry. Nem√° sestru. üö©"
                },
                text: {
                    en: "The gaslighting is honestly impressive at this point. I asked 'Since when do you have a sister?' and he looked me dead in the eye and said 'Since always, you just never listen'.\n\nI questioned my own sanity for a solid 5 minutes before I remembered I've known his parents for 3 years. Men are terrifying.",
                    cs: "Ten gaslighting je v tomhle bodƒõ fakt impozantn√≠. Zeptala jsem se 'Odkdy m√°≈° sestru?' a on se mi pod√≠val do oƒç√≠ a ≈ôekl 'Odjak≈æiva, ty mƒõ jen nikdy neposlouch√°≈°'.\n\nZpochyb≈àovala jsem vlastn√≠ p≈ô√≠ƒçetnost asi 5 minut, ne≈æ mi do≈°lo, ≈æe zn√°m jeho rodiƒçe 3 roky. Chlapi jsou dƒõsiv√≠."
                },
                comments: 194,
                score: 6900,
                awards: 5,
                flair: { en: "ü§• Pathological Liar", cs: "ü§• Patologick√Ω lh√°≈ô" }
            },
            5: {
                subreddit: "r/MeanDads",
                author: "u/tired_daughter",
                time: "8 hours ago",
                title: {
                    en: "Dad logic: Yell at everyone for 2 hours, then ask why nobody wants to watch TV with him. üì∫",
                    cs: "T√°tova logika: 2 hodiny na v≈°echny ≈ôv√°t, a pak se pt√°t, proƒç s n√≠m nikdo nechce koukat na televizi. üì∫"
                },
                text: {
                    en: "He comes home, slams doors, yells about the dishes, yells about the government, yells about the weather.\n\nThen at 8pm he sits on the couch with a beer and goes 'Why is everyone in their rooms? This family isn't close anymore.' GEE I WONDER WHY DAD. MAYBE BECAUSE YOU'RE MEAN.",
                    cs: "P≈ôijde dom≈Ø, t≈ô√≠sk√° dve≈ômi, ≈ôve kv≈Øli n√°dob√≠, ≈ôve na vl√°du, ≈ôve na poƒças√≠.\n\nPak si v 8 veƒçer sedne na gauƒç s pivem a ≈ô√≠k√° 'Proƒç jsou v≈°ichni zalezl√≠ v pokoj√≠ch? Tahle rodina u≈æ nedr≈æ√≠ pohromadƒõ.' FAKT NEV√çM TATI. MO≈ΩN√Å PROTO≈ΩE JSI ZLEJ."
                },
                comments: 423,
                score: 9800,
                awards: 8,
                flair: { en: "üò§ Angry Dad", cs: "üò§ Na≈°tvanej T√°ta" }
            },
            6: {
                subreddit: "r/DadRants",
                author: "u/cycle_breaker",
                time: "12 hours ago",
                title: {
                    en: "The cycle of a mean dad: Drink -> Get Mean -> Sleep -> Pretend nothing happened üîÑ",
                    cs: "Kolobƒõh zl√©ho t√°ty: P√≠t -> B√Ωt hnusn√Ω -> Sp√°t -> P≈ôedst√≠rat, ≈æe se nic nestalo üîÑ"
                },
                text: {
                    en: 'Does anyone else\'s dad do this? He says the most hurtful things imaginable at 9pm when he\'s had a few.\n\nThen the next morning he\'s making eggs and whistling like he didn\'t just destroy my self-esteem. And if I bring it up, I\'m "too sensitive". I\'m so tired.',
                    cs: 'Dƒõl√° to taky nƒõƒç√≠ t√°ta? V 9 veƒçer, kdy≈æ m√° upito, ≈ô√≠k√° ty nejhnusnƒõj≈°√≠ vƒõci.\n\nA druh√Ω den r√°no dƒõl√° vaj√≠ƒçka a p√≠sk√° si, jako by mi pr√°vƒõ nezniƒçil sebevƒõdom√≠. A kdy≈æ to zm√≠n√≠m, jsem "moc citliv√°". Jsem tak unaven√°.'
                },
                comments: 87,
                score: 3200,
                awards: 2,
                flair: { en: "üç∫ Exhausting", cs: "üç∫ Vyƒçerp√°vaj√≠c√≠" }
            }
        };

        const userVotes = {};
        
        function getLang() {
            return localStorage.getItem('heartosLang') || 'en';
        }
        
        function getText(obj) {
            const lang = getLang();
            if (typeof obj === 'string') return obj;
            return obj[lang] || obj.en || obj;
        }
        
        // Render all posts
        function renderPosts() {
            const container = document.getElementById('posts-container');
            container.innerHTML = '';
            
            Object.keys(postsData).forEach(postId => {
                const post = postsData[postId];
                const postCard = createPostElement(postId, post);
                container.appendChild(postCard);
            });
        }
        
        function createPostElement(postId, post) {
            const div = document.createElement('div');
            div.className = 'post-card';
            
            const t = window.__t;
            const title = getText(post.title);
            const text = getText(post.text).replace(/\n/g, '<br><br>');
            const flair = getText(post.flair);
            
            const gradients = {
                1: 'linear-gradient(135deg, #ef5350, #ffcdd2)',
                2: 'linear-gradient(135deg, #ef5350, #ffcdd2)',
                3: 'linear-gradient(135deg, #ab47bc, #e1bee7)',
                4: 'linear-gradient(135deg, #29b6f6, #b3e5fc)',
                5: 'linear-gradient(135deg, #ef5350, #ffcdd2)',
                6: 'linear-gradient(135deg, #ab47bc, #e1bee7)'
            };

            const icons = {
                1: 'üç∫', 2: 'üö©', 3: 'üç∫', 4: 'ü§°', 5: 'üò§', 6: 'üîÑ'
            };
            
            div.innerHTML = `
                <div class="vote-section">
                    <div class="vote-btn ${userVotes[postId] === 1 ? 'upvoted' : ''}" onclick="vote(this, ${postId}, 'up')">‚ñ≤</div>
                    <div class="vote-count ${userVotes[postId] === 1 ? 'positive' : (userVotes[postId] === -1 ? 'negative' : '')}" data-score="${post.score}">${post.score >= 1000 ? (post.score / 1000).toFixed(1) + 'k' : post.score}</div>
                    <div class="vote-btn ${userVotes[postId] === -1 ? 'downvoted' : ''}" onclick="vote(this, ${postId}, 'down')">‚ñº</div>
                </div>
                <div class="post-content">
                    <div class="post-header">
                        <div class="subreddit-icon" style="background: ${gradients[postId] || '#333'}; width: 20px; height: 20px; font-size: 0.7rem;">${icons[postId] || 'üí¨'}</div>
                        <span class="subreddit">${post.subreddit}</span>
                        <span>‚Ä¢</span>
                        <span class="post-author">${t('posted_by')} ${post.author}</span>
                        <span>‚Ä¢</span>
                        <span class="post-time">${post.time}</span>
                    </div>
                    <div class="post-title">${title}</div>
                    <div class="post-text">${text}</div>
                    <div style="margin-bottom: 12px;">
                        <span class="post-flair">${flair}</span>
                    </div>
                    <div class="post-actions">
                        <div class="action-btn">üí¨ ${post.comments} ${t('comments')}</div>
                        <div class="action-btn">‚ÜóÔ∏è ${t('share')}</div>
                        <div class="action-btn">üîñ ${t('save')}</div>
                        <div class="action-btn" onclick="giveAward(this)">üéÅ ${t('award')} (${post.awards})</div>
                    </div>
                </div>
            `;
            
            return div;
        }
        
        // Initial render
        document.addEventListener('DOMContentLoaded', function() {
            renderPosts();
        });
        
        // Re-render when language changes
        window.addEventListener('storage', function(e) {
            if (e && e.key === 'heartosLang') {
                renderPosts();
            }
        });
        
        function vote(btn, postId, direction) {
            const voteSection = btn.parentElement;
            const upBtn = voteSection.querySelector('.vote-btn:first-child');
            const downBtn = voteSection.querySelector('.vote-btn:last-child');
            const countEl = voteSection.querySelector('.vote-count');
            const baseScore = parseInt(countEl.dataset.score);
            
            let currentVote = userVotes[postId] || 0;
            let newVote = 0;
            
            if (direction === 'up') {
                newVote = currentVote === 1 ? 0 : 1;
                upBtn.classList.toggle('upvoted');
                downBtn.classList.remove('downvoted');
            } else {
                newVote = currentVote === -1 ? 0 : -1;
                downBtn.classList.toggle('downvoted');
                upBtn.classList.remove('upvoted');
            }
            
            userVotes[postId] = newVote;
            const displayScore = baseScore + newVote;
            
            countEl.textContent = displayScore >= 1000 ? (displayScore / 1000).toFixed(1) + 'k' : displayScore;
            countEl.className = 'vote-count';
            if (newVote > 0) countEl.classList.add('positive');
            if (newVote < 0) countEl.classList.add('negative');
        }
        
        function giveAward(btn) {
            btn.classList.add('animation-award');
            const match = btn.textContent.match(/\((\d+)\)/);
            const count = match ? parseInt(match[1]) + 1 : 1;
            const t = window.__t;
            btn.innerHTML = `üéÅ ${t('award')} (${count})`;
            setTimeout(() => btn.classList.remove('animation-award'), 500);
        }
        
        function toggleJoin(btn) {
            const t = window.__t;
            if (btn.classList.contains('joined')) {
                btn.classList.remove('joined');
                btn.textContent = t('join');
            } else {
                btn.classList.add('joined');
                btn.textContent = t('joined');
            }
        }
        
        function createNewPost() {
            document.getElementById('createPostBox').style.display = 'flex';
            document.getElementById('postTitle').focus();
        }
        
        function cancelPost() {
            document.getElementById('createPostBox').style.display = 'none';
            document.getElementById('postTitle').value = '';
            document.getElementById('postContent').value = '';
        }
        
        function submitPost() {
            const title = document.getElementById('postTitle').value.trim();
            const content = document.getElementById('postContent').value.trim();
            const t = window.__t;
            
            if (!title) {
                alert('Please add a title!');
                return;
            }
            
            const container = document.getElementById('posts-container');
            const newPost = document.createElement('div');
            newPost.className = 'post-card';
            newPost.innerHTML = `
                <div class="vote-section">
                    <div class="vote-btn upvoted" onclick="vote(this, ${Date.now()}, 'up')">‚ñ≤</div>
                    <div class="vote-count positive" data-score="1">1</div>
                    <div class="vote-btn" onclick="vote(this, ${Date.now()}, 'down')">‚ñº</div>
                </div>
                <div class="post-content">
                    <div class="post-header">
                        <div class="subreddit-icon" style="background: linear-gradient(135deg, #ff4500, #ff8717); width: 20px; height: 20px; font-size: 0.7rem;">üëΩ</div>
                        <span class="subreddit">r/HeartOS</span>
                        <span>‚Ä¢</span>
                        <span class="post-author">${t('posted_by')} u/you</span>
                        <span>‚Ä¢</span>
                        <span class="post-time">just now</span>
                    </div>
                    <div class="post-title">${title}</div>
                    <div class="post-text">${content}</div>
                    <div class="post-actions">
                        <div class="action-btn">üí¨ 0 ${t('comments')}</div>
                        <div class="action-btn">‚ÜóÔ∏è ${t('share')}</div>
                        <div class="action-btn">üîñ ${t('save')}</div>
                        <div class="action-btn" onclick="giveAward(this)">üéÅ ${t('award')}</div>
                    </div>
                </div>
            `;
            
            userVotes[Date.now()] = 1;
            container.insertBefore(newPost, container.firstChild);
            cancelPost();
        }
    </script>
</body>
</html>